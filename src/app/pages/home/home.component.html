<main class="min-h-screen relative overflow-x-hidden">
  <!-- Background siempre visible para el efecto visual -->
  <app-background-animation></app-background-animation>
  
  <!-- Navbar y Hero: Carga INMEDIATA (Above the Fold) -->
  <app-navbar></app-navbar>
  <app-language-switch-indicator></app-language-switch-indicator>
  
  <!-- Loader personalizado con foto de perfil -->
  <app-custom-loader *ngIf="!isLoaded"></app-custom-loader>
  
  <div *ngIf="isLoaded" 
       class="container mx-auto px-4 pt-24 transition-opacity duration-500"
       [class.opacity-100]="showContent"
       [class.opacity-0]="!showContent">
    
    <!-- Hero: Carga INMEDIATA (crítico para LCP) -->
    <app-hero></app-hero>
    
    <!-- Experience: Lazy load después de 300ms (precarga antes del scroll) -->
    @defer (on timer(300ms)) {
      <app-experience></app-experience>
    } @placeholder {
      <div class="min-h-[500px]"></div>
    }
    
    <!-- Education: Lazy load después de 500ms (precarga antes del scroll) -->
    @defer (on timer(500ms)) {
      <app-education></app-education>
    } @placeholder {
      <div class="min-h-[400px]"></div>
    }
    
    <!-- Projects: Lazy load después de 700ms (precarga antes del scroll - MUCHAS IMÁGENES) -->
    @defer (on timer(700ms)) {
      <app-projects></app-projects>
    } @placeholder {
      <div class="min-h-[600px]"></div>
    }
    
    <!-- Skills: Lazy load después de 1000ms -->
    @defer (on timer(1000ms)) {
      <app-skills></app-skills>
    } @placeholder {
      <div class="min-h-[400px]"></div>
    }
    
    <!-- Languages: Lazy load después de 1200ms -->
    @defer (on timer(1200ms)) {
      <app-languages></app-languages>
    } @placeholder {
      <div class="min-h-[300px]"></div>
    }
  </div>
  
  <!-- Footer: Lazy load después de 1400ms -->
  @defer (on timer(1400ms)) {
    <app-footer *ngIf="isLoaded"></app-footer>
  } @placeholder {
    <div class="h-20"></div>
  }
</main>
